<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>PubNub APIs Explained | History</title>
  <meta name="description" content="Simple Chat Room">
  <meta name="author" content="Tomomi Imura  @girlie_mac">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <!-- Google Tag Manager -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PZWSZ2"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-PZWSZ2');</script>
  <!-- End Google Tag Manager -->

  <header>
    <a href="index.html">PubNub JavaScript APIs</a>
  </header>

  <section class="masthead">
    <h1>Storage and Playback (History API)</h1>
  </section>

  <section class="main">

    <section class="intro">
      <h2>Storage and Playback In a Nutshell</h2>
      PubNub's Storage and Playback feature, also referred as History API, enables you to store messages temporary as they are published, and retrieve the previously-published messages at a later time. (<a href="http://www.pubnub.com/docs/web-javascript/storage-and-history" target="_blank">API</a>)
    </section>

    <section class="demo">
      <h2>Demo</h2>

      <p>See the <a href="pubsub.html">previous section to see How to Play Tic-Tac-Toe</a>.</p>

      <p><strong>You (X):</strong>
      <ol>
        <li>Stay on this browser</li>
        <li>Play when your opponent is ready</li>
      </ol>
      </p>

      <p>Your opponent (O) should be playing from this URL: <strong><span id="gameIdQuery"></span></strong>
      </ol>
      </p>

      <p>To demonstrate how PubNub Storage and Playback (History API) works, each move is recorded by sending the data to PubNub data stream with timestamp. You will see how the API works after the game!</p>


      <section class="game">
        <div class="col">
          <ol id="moves">
          </ol>
        </div>

        <div class="col">
          <div id="tictactoe" class="disabled"></div>
        </div>

        <div class="col">
          Game ID: <strong id="gameId"></strong>
          <br>
          You: <span id="you"></span>
          <br>
          <span id="whosTurn">It is your turn!</span>
        </div>

      </section>

    </section>

    <section id="history">
      <h2>History API Explained</h2>

      <p>This game has maximum 9 moves. Each move data is sent to PubNub, so that you can track back 9 messages using History API. Let's see how the API with these optional attributes works:</p>

      <p>
      History count:
      <select id="count">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
        <option value="5">5</option>
        <option value="6">6</option>
        <option value="7">7</option>
        <option value="8">8</option>
        <option value="9">9</option>
        <option value="100">Default (100)</option>
      </select>
      </p>

      <p>
      <input type="checkbox" name="reverse" id="reverse">Reverse the traversal order<br>
      <small class="subdue"><em>True</em> will return messages in first-in-first-out (FIFO) order.
      This is disregarded, when the time is specified.</small>
      </p>

      <p><input type="checkbox" name="time" id="time">Specific Time span

      <select id="timeSpan" hidden>
        <option value="0.5">30 sec ago from now</option>
        <option value="5">5 min ago from now</option>
        <option value="60">1 hour ago from now</option>
      </select>
      </p>

      <button id="showResultButton">Show Moves</button>

      <ol id="output"></ol>
    </section>

  </section>

  <footer><a href="http://pubnub.com" target="_blank">PubNub.com</a></footer>


  <script src="https://cdn.pubnub.com/sdk/javascript/pubnub.4.15.1.min.js"></script>
  <script src="js/app.js"></script>
  <script src="http://cdn.pubnub.com/socket.io.min.js"></script>

</body>
</html>
