<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>PubNub APIs Explained | Presence</title>
  <meta name="description" content="Simple Chat Room">
  <meta name="author" content="Tomomi Imura  @girlie_mac">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
</head>

<body>
  <!-- Google Tag Manager -->
  <noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PZWSZ2"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  '//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-PZWSZ2');</script>
  <!-- End Google Tag Manager -->

  <header>
    <a href="index.html">PubNub JavaScript APIs</a>
  </header>

  <section class="masthead">
    <h1>Presence</h1>
  </section>

  <section class="main">

    <section class="intro">
      <h2>Presence In a Nutshell</h2>
      Presence allows you to track who (or which device, if you are building an Internet of Things application) is online and offline, and the status of users/devices in realtime. (<a href="http://www.pubnub.com/docs/web-javascript/presence" target="_blank">API</a>)
    </section>

    <section class="demo">
      <h2>Demo</h2>

      <p>See the <a href="pubsub.html">previous section to see How to Play Tic-Tac-Toe</a>.</p>

      <p><strong>You (X):</strong>
      <ol>
        <li>Stay on this browser</li>
        <li>Play when your opponent is ready</li>
      </ol>
      </p>

      <p>Your opponent (O) should be playing from this URL: <strong><span id="gameIdQuery"></span></strong>
      </ol>
      </p>

      <h3>Presence in Action</h3>

      <p>This game won't start until two players are connected at the same channel. Presence detection makes it possible to track when the second player logs on.</p>


      <section class="game">
        <div class="col">
          <div class="presence">
            <strong>0</strong>
            <span>players</span>
          </div>
        </div>

        <div class="col">
          <div id="tictactoe" class="disabled"></div>
        </div>

        <div class="col">
          Game ID: <strong id="gameId"></strong>
          <br>
          You: <span id="you"></span>
          <br>
          <span id="whosTurn">It is your turn!</span>
        </div>

      </section>

    </section>

    <section id="presence">
      <h2>Presence API Explained</h2>

      <p>Presence allows you to detect more than just a number of users online. It triggers the following presence events against the channels too. They are, <em>Join</em>, <em>Leave</em>, and <em>timeout</em>-</p>

      <div id="presenceConsole"></div>

      <p>Observe the <em>Join</em> action, by joining to the game. When you open an another browser window or tab to access the same game ID, you should see the presence indication each time a new player joining (although any players who joine after the 2nd player cannot play the game).</p>

      <p>Observe the <em>Leave</em> action, by manually leaving the game. Click "Quit" button below to <strong>unsubscribing</strong> from the game channel.</p>

      <button id="quitButton">Quit</button>

      <p>Observe <em>Timeout</em> action, by <strong>closing the browser tab or window</strong>. It happens when the browser loses its socket connection, and it can take up a few minutes to timeout. It happens when you are accessing on mobile and loses the connectivity, too.</p>
    </section>

  </section>

  <footer><a href="http://pubnub.com" target="_blank">PubNub.com</a></footer>


  <script src="https://cdn.pubnub.com/sdk/javascript/pubnub.4.15.1.min.js"></script>
  <script src="js/app.js"></script>

</body>
</html>
